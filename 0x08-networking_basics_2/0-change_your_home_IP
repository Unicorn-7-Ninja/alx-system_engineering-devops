#!/usr/bin/env bash
#localhost resolves to 127.0.0.2 & facebook.com resolves to 8.8.8.8

if [ "$(id -u)" -ne 0 ]; then
    echo "Ce script doit être exécuté en tant que root" >&2
    exit 1
fi

localhost_entry="127.0.0.2 localhost"
facebook_entry="8.8.8.8 facebook.com"

hosts_file="/etc/hosts"


if grep -qE '^127\.0\.0\.2\s+localhost' "$hosts_file"; then
    echo "localhost est déjà résolu à 127.0.0.2"
else
    sed -i "/^127\.0\.0\.1\s\+localhost/ s/$/ 127.0.0.2/" "$hosts_file"
    echo "localhost est maintenant résolu à 127.0.0.2"
fi
if grep -qE '^8\.8\.8\.8\s+facebook\.com' "$hosts_file"; then
    echo "facebook.com est déjà résolu à 8.8.8.8"
else
    echo "$facebook_entry" >> "$hosts_file"
    echo "facebook.com est maintenant résolu à 8.8.8.8"
fi
